<div role="navigation" class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand">Infopark DCC</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <% if logged_in? %>
          <li class="dropdown" id='user'
              data-login='<%= @current_user.login %>'
              data-first_name='<%= @current_user.first_name %>'
              data-last_name='<%= @current_user.last_name %>'>
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <%= t('user.welcome') %>, <%= @current_user.first_name %> <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="btn checkbox unchecked" id="show_all_projects">
                  <i class='prefix_icon glyphicon glyphicon-check'></i><%= t('prefs.show_all_projects') %>
                </a>
              </li>
              <li class="divider"></li>
              <li><%= link_to logout_path do -%>
                <i class='prefix_icon glyphicon glyphicon-log-out'></i><%= t('user.logout') %>
              <% end %></li>
            </ul>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
<div class="container">
  <div id="projects" class="row">
    <div id="add_project" class="col-xs-12 col-sm-6 col-md-4 col-lg-4 col-xl-3 col-xxl-2">
      <%= form_for :project, url: {action: :create} do |f| -%>
        <div class="panel panel-default add_project">
          <div class="panel-heading">
            <span class="form"><%= f.text_field :name, placeholder: t('project.name') %></span>
          </div>
          <div class="panel-body unobtrusive">
            <span class="form">
              <i class="prefix_icon icon icon-github_mark"></i>
              <%= f.text_field :url, placeholder: t('project.url') %><br/>
              <i class="prefix_icon glyphicon glyphicon-random"></i>
              <%= f.text_field :branch, placeholder: t('project.branch') %><br/>
              <i class="prefix_icon glyphicon glyphicon-user"></i>
              <div class="make-switch switch-small" data-on-label="<%= t('project.personal') %>"
                  data-off-label="<%= t('project.shared') %>">
                <%= f.check_box :personal, checked: true %>
              </div>
              <div class='pull-right btn-group btn-group-xs'>
                <button type="button" class="btn btn-default"><%= t('dialog.cancel') %></button>
                <button type="submit" class="btn btn-primary"><%= t('dialog.create') %></button>
              </div>
            </span>
            <div class="show_form_button">
              <a class="btn">
                <i class="glyphicon glyphicon-plus"></i><br/>
                <%= t('project.new') %>
              </a>
            </div>
          </div>
        </div>
      <% end -%>
    </div>
  </div>
</div>

<%= render 'modal', options: {id: 'stats_dialog', buttons: :close} %>

<%= render 'modal', options: {id: 'build_dialog', buttons: :close} %>

<%= render 'modal', options: {id: 'bucket_log_dialog', buttons: :close} %>

<div id="error_overlay" class="error_overlay">
  <h1><%= t('error.occured') %>:</h1>
  <div class="error_overlay_messages_background">
    <div class="error_overlay_messages_crop">
      <div id="error_messages" class="error_overlay_messages panel-group">
      </div>
      <div id="error_overlay_close" class="error_overlay_close">
      </div>
    </div>
  </div>
</div>

<% content_for :header_content do -%>
<!-- FIXME
  <input id="search" type="text" placeholder="Suche nach"
      onchange="update_search()" onkeyup="update_search()" />
  <div id="spinner"></div>
-->
<% end -%>

<script>
//<!--
  $(document).ready(function() {
    init_localizer(<%== YAML.load_file(File.expand_path("config/locales/#{I18n.locale}.yml",
        Rails.root)).to_json %>, <%== "'#{I18n.locale}'" %>);
    render_gui();
  });
//-->
</script>
